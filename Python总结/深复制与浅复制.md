前言

> Python的深复制与浅复制和其他语言的不太一样

假设现在有如下一个要求，我的程序需要对一个数据进行修改，但是我又要保持这个数据和修改之前保持一致。那我们怎么操作呢？

```python
import copy

# 直接用一个新的变量
a = ['111', '222']
b=a
b[0] = '333'
print(a, b,sep='\n')

print('-'*20)

# 调用 copy 方法
a = ['111', '222']
b=copy.copy(a)
b[0] = '333'
print(a, b,sep='\n')
```

结果

```
['333', '222']
['333', '222']
--------------------
['111', '222']
['333', '222']
```

然而，在有的情况下，结果却又不一样

```python
import copy
a = ['111', '222', ['333', '444']]
b = copy.copy(a)
b[2][0] = '555'
print(a, b,sep='\n')

print('-'*20)

a = ['111', '222', ['333', '444']]
b = copy.deepcopy(a)
b[2][0] = '555'
print(a,b,sep='\n')
```

结果

```
['111', '222', ['555', '444']]
['111', '222', ['555', '444']]
--------------------
['111', '222', ['333', '444']]
['111', '222', ['555', '444']]
```

总结

- copy方法是浅复制，deepcopy方法是深复制
- 浅复制和深复制的区别只与复合对象有关(对象包含其他对象，如列表或类实例)
- 浅复制构造了一个新的复合对象，然后(尽可能地)将原始对象的引用插入
- 深复制构造了一个新的复合对象，然后递归地将原始对象的副本插入